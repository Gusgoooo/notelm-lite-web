# 若改用本机 Postgres（5432）：在超级用户下执行 packages/db/scripts/init-local-postgres.sql，
# 然后 .env 使用 DATABASE_URL=postgresql://postgres:postgres@localhost:5432/notebookgo
services:
  postgres:
    image: pgvector/pgvector:pg16
    environment:
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: postgres
      POSTGRES_DB: notebookgo
    ports:
      - "5433:5432"   # 使用 5433 避免与本机 5432 上的 Postgres 冲突
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U postgres"]
      interval: 5s
      timeout: 5s
      retries: 5
